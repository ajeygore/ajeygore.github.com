---
layout: bare
body_class: home
leadingpath: ./
permalink: /life
title: Life in Weeks - Visualize Your Life Journey
description: Interactive tool to visualize your entire life as a grid of weeks, calculate remaining time, and make every moment count.
---

<style>
    /* Custom CSS Variables for Consistent Theme */
    :root {
        --bg-primary: #fafafa;
        --bg-secondary: #ffffff;
        --border-color: #e0e0e0;
        --text-primary: #2c3e50;
        --text-secondary: #7f8c8d;
        --accent-color: #3498db;
        --success-color: #27ae60;
        --warning-color: #f39c12;
    }

    /* Global Styles */
    body {
        background: var(--bg-primary) !important;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
        color: var(--text-primary) !important;
    }

    /* Navbar - Light Blue-Purple Gradient */
    .navbar {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1) !important;
    }

    .navbar-brand,
    .navbar-nav .nav-link {
        color: white !important;
        font-weight: 500 !important;
    }

    .navbar-nav .nav-link:hover {
        color: #f8f9fa !important;
        background: rgba(255,255,255,0.1) !important;
        border-radius: 4px !important;
    }

    /* Hero Section */
    .life-hero {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        border-radius: 12px !important;
        padding: 3rem 2rem !important;
    }

    /* Content Container */
    .content-container {
        max-width: 1200px !important;
        margin: 0 auto !important;
        padding: 0 15px !important;
    }

    /* Card Styles */
    .card {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        border-radius: 8px !important;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05) !important;
    }

    .card-title {
        color: var(--text-primary) !important;
        font-weight: 700 !important;
    }

    /* Input Fields - Flat Style */
    .form-control,
    .form-select {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
        border-radius: 4px !important;
    }

    .form-control::placeholder {
        color: var(--text-secondary) !important;
    }

    .form-label {
        color: var(--text-primary) !important;
        font-weight: 600 !important;
    }

    .input-group-text {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
        border-left: none !important;
    }

    /* Date Input Styling */
    .date-input {
        font-family: 'Courier New', monospace;
        letter-spacing: 0.5px;
        font-size: 1rem;
    }

    .date-input:focus {
        border-color: #86b7fe;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }

    .date-input.is-valid {
        border-color: #198754;
    }

    .date-input.is-invalid {
        border-color: #dc3545;
    }

    /* Flat Life Bar Design */
    .life-bar {
        background: linear-gradient(90deg, var(--success-color) 0%, var(--accent-color) 100%);
        height: 8px;
        border-radius: 4px;
        margin: 1rem 0;
    }

    /* Grid Styles */
    .life-grid {
        display: grid;
        grid-template-columns: repeat(52, 1fr);
        gap: 1px;
        background: var(--border-color);
        padding: 2px;
        border-radius: 8px;
        max-width: 100%;
        overflow-x: auto;
    }

    .week-cell {
        width: 8px;
        height: 8px;
        background: var(--bg-secondary);
        border-radius: 1px;
    }

    .week-cell.lived {
        background: var(--success-color);
    }

    .week-cell.current {
        background: var(--warning-color);
        box-shadow: 0 0 0 1px var(--warning-color);
    }

    .week-cell.future {
        background: var(--border-color);
    }

    /* Form Check Styling */
    .form-check-input {
        width: 1rem;
        height: 1rem;
        cursor: pointer;
        border: 2px solid var(--border-color);
        background: var(--bg-secondary);
    }

    .form-check-input:checked {
        background-color: var(--accent-color);
        border-color: var(--accent-color);
    }

    .form-check {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 0;
    }

    .form-check-label {
        cursor: pointer;
        font-weight: 500;
        color: var(--text-primary);
    }

    /* Flat Statistics Cards */
    .stats-card {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        transition: transform 0.2s ease;
        border-radius: 8px !important;
    }

    .stats-card:hover {
        transform: translateY(-2px) !important;
    }

    .stat-number {
        font-size: 2.5em !important;
        font-weight: 800 !important;
        color: var(--text-primary) !important;
        margin-bottom: 0.25rem !important;
    }

    .stat-label {
        font-size: 0.9em !important;
        color: var(--text-secondary) !important;
        font-weight: 500 !important;
    }

    body {
        background: var(--bg-primary) !important;
        color: var(--text-primary) !important;
        min-height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
    }

    /* Modern light blue-purple gradient navbar */
    header.sticky-top {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #a8edea 50%, #fed6e3 100%) !important;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2) !important;
        box-shadow: 0 2px 10px rgba(102, 126, 234, 0.1) !important;
    }

    /* Navbar text styling for gradient background */
    header .name-header {
        color: white !important;
        font-weight: 600 !important;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
    }

    header .menu-section {
        color: #2d3748 !important;
        font-weight: 600 !important;
        text-shadow: none !important;
    }

    header .menu-section:hover {
        color: #1a202c !important;
    }

    /* Hero Section with gradient background for text visibility */
    .hero-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%) !important;
        color: white !important;
        padding: 3rem 0;
        text-align: center;
    }

    /* Ensure hero text is visible */
    .hero-section h1,
    .hero-section p,
    .hero-section .text-white {
        color: white !important;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;
    }

    /* Flat Cards */
    .card {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
        border-radius: 8px !important;
    }

    /* Input Fields - Flat Style */
    .form-control,
    .form-select {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
        border-radius: 4px !important;
    }

    .form-control::placeholder {
        color: var(--text-secondary) !important;
    }

    /* Custom Date Input Styling */
    .date-input {
        font-family: 'Courier New', monospace;
        letter-spacing: 0.5px;
    }

    .input-group-text {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
        border-left: none !important;
    }

    .date-input:focus+.input-group-text {
        border-color: #86b7fe !important;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25) !important;
    }

    .form-label {
        color: var(--text-primary) !important;
        font-weight: 600 !important;
    }

    /* Flat Life Bar Design */
    .life-bar {
        height: 24px !important;
        background: var(--border-color) !important;
        border-radius: 4px !important;
        overflow: hidden !important;
        position: relative;
        border: 1px solid var(--border-color) !important;
    }

    .life-bar-lived {
        background: #28a745 !important;
        height: 100% !important;
        position: relative;
        transition: width 0.3s ease;
    }

    .life-bar-remaining {
        background: #007bff !important;
        height: 100% !important;
        position: absolute;
        top: 0;
        right: 0;
    }

    .life-bar-current {
        position: absolute;
        top: 0;
        width: 3px;
        height: 100%;
        background: #ffc107 !important;
        z-index: 10;
    }

    /* Flat Life Grid Design */
    .life-grid {
        display: grid;
        grid-template-columns: repeat(52, 8px);
        gap: 1px;
        justify-content: center;
        max-width: 100%;
        overflow-x: auto;
        padding: 2em 1em;
    }

    .week-square {
        width: 8px;
        height: 8px;
        border-radius: 1px;
        border: none;
        cursor: pointer;
    }

    .week-square:hover {
        transform: scale(1.5) !important;
        z-index: 10;
        border: 1px solid var(--text-primary) !important;
    }

    .week-past {
        background: #28a745 !important;
    }

    .week-current {
        background: #ffc107 !important;
        animation: currentWeekBlink 1s infinite;
    }

    .week-future {
        background: #007bff !important;
        opacity: 0.7;
    }

    /* Current week blink animation */
    @keyframes currentWeekBlink {

        0%,
        50% {
            opacity: 1;
        }

        51%,
        100% {
            opacity: 0.3;
        }
    }

    /* Flat Statistics Cards */
    .stats-card {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        transition: transform 0.2s ease;
        border-radius: 8px !important;
    }

    .stats-card:hover {
        transform: translateY(-2px) !important;

        .stat-number {
            font-size: 2.5em !important;
            font-weight: 800 !important;
            color: var(--text-primary) !important;
        }

        .stat-label {
            color: var(--text-secondary) !important;
            font-weight: 500 !important;
        }

        /* Text Colors */
        .text-white,
        h1,
        h2,
        h3,
        h4,
        h5 {
            color: var(--text-primary) !important;
        }

        .text-muted,
        .text-secondary {
            color: var(--text-secondary) !important;
        }

        /* Button Styling */
        .btn-primary {
            background: var(--accent-color) !important;
            border: 1px solid var(--accent-color) !important;
            color: white !important;
            border-radius: 4px !important;
        }

        .btn-primary:hover {
            background: #0056b3 !important;
            border-color: #0056b3 !important;
            transform: translateY(-1px) !important;
            color: white !important;
        }

        transform: translate(-50%, -50%);
        font-weight: 700;
        font-size: 0.9em;
        color: white !important;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        z-index: 20;
    }

    .progress-labels {
        display: flex;
        justify-content: space-between;
        margin-top: 0.5em;
        font-size: 0.9em;
        color: rgba(255, 255, 255, 0.8);
    }

    /* Health Checkboxes */
    .health-checkboxes {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1em;
        margin: 1em 0;
    }

    .form-check-input {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        width: 1rem !important;
        height: 1rem !important;
        margin-right: 0.5rem !important;
        cursor: pointer !important;
    }

    .form-check-input:checked {
        background-color: var(--accent-color) !important;
        border-color: var(--accent-color) !important;
    }

    .form-check {
        display: flex !important;
        align-items: center !important;
        margin-bottom: 0.5rem !important;
    }

    .form-check-label {
        color: var(--text-primary) !important;
        cursor: pointer !important;
        margin-left: 0.5rem !important;
    }

    /* Weekend Display */
    .weekend-number {
        font-size: 4em;
        font-weight: 800;
        color: var(--accent-color);
        margin-bottom: 0.5em;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
        .life-grid {
            grid-template-columns: repeat(52, 6px);
            padding: 1em 0.5em;
        }

        .week-square {
            width: 6px;
            height: 6px;
        }
    }

    @media (max-width: 576px) {
        .life-grid {
            grid-template-columns: repeat(52, 5px);
        }

        .week-square {
            width: 5px;
            height: 5px;
        }
    }

    /* Utility Classes */
    .hidden {
        display: none !important;
    }
</style>

<!-- Hero Section -->
<section class="hero-section py-4">
    <div class="content-container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-12">
                <div class="life-hero mb-4">
                    <h1 class="display-4 fw-bold text-white mb-3">
                        üóìÔ∏è Life in Weeks
                    </h1>
                    <p class="h4 text-white-50 mb-4">
                        Visualize your entire life as a grid of weeks and see how you spend your time
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content Section -->
<section class="py-5">
    <div class="content-container">
        <div class="row justify-content-center">
            <div class="col-lg-10">

                <!-- Input Section -->
                <div class="card shadow-lg border-0 mb-4">
                    <div class="card-body p-4">
                        <h4 class="card-title text-center mb-4">Enter Your Information</h4>

                        <div class="row">
                            <div class="col-md-6">
                                <label for="dob" class="form-label">Date of Birth</label>
                                <input type="text" 
                                       id="dob" 
                                       name="dob" 
                                       class="form-control date-input" 
                                       placeholder="YYYY-MM-DD (e.g., 1990-05-15)"
                                       maxlength="10"
                                       autocomplete="bday">
                                <small class="form-text text-muted">Enter your birth date in YYYY-MM-DD format</small>
                            </div>
                            <div class="col-md-6">
                                <label for="location" class="form-label">Location (Life Expectancy)</label>
                                <select id="location" name="location" class="form-select">
                                    <option value="global">üåç Global Average (73 years)</option>
                                    <optgroup label="Continents">
                                        <option value="europe">üá™üá∫ Europe (79 years)</option>
                                        <option value="north_america">üá∫üá∏ North America (78 years)</option>
                                        <option value="oceania">üá¶üá∫ Oceania (82 years)</option>
                                        <option value="asia">üá¶üá∏ Asia (73 years)</option>
                                        <option value="south_america">üáßüá∑ South America (76 years)</option>
                                        <option value="africa">üáøüá¶ Africa (64 years)</option>
                                    </optgroup>
                                    <optgroup label="Major Countries">
                                        <option value="japan">üáØüáµ Japan (85 years)</option>
                                        <option value="switzerland">üá®üá≠ Switzerland (84 years)</option>
                                        <option value="singapore">üá∏üá¨ Singapore (84 years)</option>
                                        <option value="italy">üáÆüáπ Italy (83 years)</option>
                                        <option value="australia">üá¶üá∫ Australia (83 years)</option>
                                        <option value="spain">üá™üá∏ Spain (83 years)</option>
                                        <option value="france">üá´üá∑ France (83 years)</option>
                                        <option value="canada">üá®üá¶ Canada (82 years)</option>
                                        <option value="south_korea">üá∞üá∑ South Korea (82 years)</option>
                                        <option value="norway">üá≥üá¥ Norway (82 years)</option>
                                        <option value="sweden">üá∏üá™ Sweden (82 years)</option>
                                        <option value="uk">üá¨üáß United Kingdom (81 years)</option>
                                        <option value="germany">üá©üá™ Germany (81 years)</option>
                                        <option value="usa">üá∫üá∏ United States (79 years)</option>
                                        <option value="china">üá®üá≥ China (78 years)</option>
                                        <option value="brazil">üáßüá∑ Brazil (76 years)</option>
                                        <option value="russia">üá∑üá∫ Russia (73 years)</option>
                                        <option value="india">üáÆüá≥ India (70 years)</option>
                                        <option value="south_africa">üáøüá¶ South Africa (65 years)</option>
                                        <option value="nigeria">üá≥üá¨ Nigeria (55 years)</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <button class="btn btn-primary btn-lg px-5" onclick="calculateLife()">
                                ‚ú® Visualize My Life ‚ú®
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Health Factors Section -->
                <div class="card shadow-lg border-0 mb-4" id="health-factors">
                    <div class="card-body p-4">
                        <h4 class="card-title text-center mb-4">Health Factors (Optional)</h4>
                        <p class="text-center text-muted mb-4">Select any that apply to get a more accurate life
                            expectancy</p>

                        <div class="health-checkboxes">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="tobacco">
                                <label class="form-check-label" for="tobacco">üö¨ Tobacco use (-7 years)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="alcohol">
                                <label class="form-check-label" for="alcohol">üç∫ Heavy alcohol use (-3 years)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="diabetes">
                                <label class="form-check-label" for="diabetes">ü©∫ Diabetes (-4 years)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="heart">
                                <label class="form-check-label" for="heart">‚ù§Ô∏è Heart disease (-6 years)</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Life Grid Section (Shows first) -->
                <div class="card shadow-lg border-0 mb-4 hidden" id="grid-container">
                    <div class="progress-info p-3">
                        <h3>Life Progress Bar</h3>
                        <div class="life-bar">
                            <div id="life-bar-lived" class="life-bar-lived"></div>
                            <div id="life-bar-remaining" class="life-bar-remaining"></div>
                            <div id="life-bar-current" class="life-bar-current"></div>
                            <div id="life-bar-percentage" class="progress-percentage">0%</div>
                        </div>
                        <div class="progress-labels">
                            <span id="current-age-display">Birth</span>
                            <span id="life-expectancy-display">Life Expectancy</span>
                        </div>
                    </div>

                    <div class="card-body p-4">
                        <h4 class="card-title text-center mb-2">Your Life in Weeks</h4>
                        <p class="text-center text-muted mb-4" id="completion-info">
                            <!-- Completion percentage will be inserted here -->
                        </p>

                        <div id="life-grid" class="life-grid"></div>

                        <p class="text-center text-muted mt-4">
                            Each square represents one week of your life. Green = lived, Yellow = current week, Blue =
                            future.
                        </p>
                    </div>
                </div>

                <!-- Statistics Section -->
                <div class="card shadow-lg border-0 mb-4 hidden" id="stats-section">
                    <div class="card-body p-4">
                        <h4 class="card-title text-center mb-4">‚ú® How You've Spent Your Life ‚ú®</h4>
                        <p class="text-center text-muted mb-4">Every hour counts - here's your time breakdown in style!
                        </p>

                        <div id="stats-grid" class="row g-3"></div>
                    </div>
                </div>

                <!-- Weekend Info Section -->
                <div class="card shadow-lg border-0 mb-4 hidden" id="weekend-info-card">
                    <div class="card-body p-4 text-center">
                        <div id="weekend-info"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<script>
    // Performance optimization - cache grid state
    let lastGridConfig = null;
    let gridGenerated = false;

    // Life expectancy data by location
    const lifeExpectancyData = {
        'global': 73,
        'europe': 79,
        'north_america': 78,
        'oceania': 82,
        'asia': 73,
        'south_america': 76,
        'africa': 64,
        'japan': 85,
        'switzerland': 84,
        'singapore': 84,
        'italy': 83,
        'australia': 83,
        'spain': 83,
        'france': 83,
        'canada': 82,
        'south_korea': 82,
        'norway': 82,
        'sweden': 82,
        'uk': 81,
        'germany': 81,
        'usa': 79,
        'china': 78,
        'brazil': 76,
        'russia': 73,
        'india': 70,
        'south_africa': 65,
        'nigeria': 55
    };

    function calculateLife() {
        const dobInput = document.getElementById('dob').value;
        if (!dobInput) {
            alert('Please enter your date of birth');
            return;
        }

        const dob = new Date(dobInput);
        const now = new Date();

        // Validate date
        if (dob > now) {
            alert('Date of birth cannot be in the future');
            return;
        }

        // Get location-based life expectancy
        const selectedLocation = document.getElementById('location').value;
        const baseLifeExpectancy = lifeExpectancyData[selectedLocation] || 73;

        // Calculate health factor reductions
        let healthReduction = 0;
        const tobaccoChecked = document.getElementById('tobacco').checked;
        const alcoholChecked = document.getElementById('alcohol').checked;
        const diabetesChecked = document.getElementById('diabetes').checked;
        const heartChecked = document.getElementById('heart').checked;

        if (tobaccoChecked) healthReduction += 7;
        if (alcoholChecked) healthReduction += 3;
        if (diabetesChecked) healthReduction += 4;
        if (heartChecked) healthReduction += 6;

        console.log('Health factors:', { tobaccoChecked, alcoholChecked, diabetesChecked, heartChecked, healthReduction });

        const adjustedLifeExpectancy = Math.max(40, baseLifeExpectancy - healthReduction);

        const ageMs = now - dob;
        const ageDays = Math.floor(ageMs / (1000 * 60 * 60 * 24));
        const ageWeeks = Math.floor(ageDays / 7);
        const ageYears = ageDays / 365.25;
        const currentWeek = ageWeeks;
        const totalWeeks = adjustedLifeExpectancy * 52;

        // Show health factors section after first calculation
        document.getElementById('health-factors').classList.remove('hidden');

        // Constants for calculations
        const totalHoursLived = ageDays * 24;
        const sleepHoursPerDay = 8;
        const workHoursPerWeek = 40;
        const workStartAge = 22;
        const retirementAge = 65;
        const bathingMinutesPerDay = 30;
        const eatingHoursPerWeek = 8;
        const commutingHoursPerDay = 1;
        const exerciseHoursPerWeek = 3;
        const tvHoursPerDay = 3;
        const socialMediaHoursPerDay = 2;
        const cookingHoursPerDay = 1;
        const shoppingHoursPerWeek = 4;

        // Calculate statistics in hours
        const sleptHours = Math.round(ageDays * sleepHoursPerDay);
        const workingYears = Math.max(0, Math.min(ageYears - workStartAge, retirementAge - workStartAge));
        const workedHours = Math.round(workingYears * 52 * workHoursPerWeek);
        const bathingHours = Math.round(ageDays * (bathingMinutesPerDay / 60));
        const eatingHours = Math.round(ageWeeks * eatingHoursPerWeek);
        const commutingHours = Math.round(workingYears * 365.25 * commutingHoursPerDay);
        const exerciseHours = Math.round(ageWeeks * exerciseHoursPerWeek);
        const tvHours = Math.round(ageDays * tvHoursPerDay);
        const socialMediaHours = Math.round(ageDays * socialMediaHoursPerDay);
        const cookingHours = Math.round(ageDays * cookingHoursPerDay);
        const shoppingHours = Math.round(ageWeeks * shoppingHoursPerWeek);

        // Calculate life bar percentages
        const livedPercentage = Math.min(100, (ageYears / adjustedLifeExpectancy) * 100);
        const currentPosition = livedPercentage;

        // Show sections
        document.getElementById('grid-container').classList.remove('hidden');
        document.getElementById('stats-section').classList.remove('hidden');
        document.getElementById('weekend-info-card').classList.remove('hidden');

        // Update life bar
        document.getElementById('life-bar-lived').style.width = livedPercentage + '%';
        document.getElementById('life-bar-remaining').style.width = (100 - livedPercentage) + '%';
        document.getElementById('life-bar-current').style.left = currentPosition + '%';
        document.getElementById('life-bar-percentage').textContent = Math.round(livedPercentage) + '%';
        document.getElementById('current-age-display').textContent = `Age ${Math.floor(ageYears)}`;
        document.getElementById('life-expectancy-display').textContent = `Age ${adjustedLifeExpectancy}`;

        // Update completion info
        const weekCompletion = ((currentWeek / totalWeeks) * 100).toFixed(1);
        document.getElementById('completion-info').innerHTML = `
            You have completed <strong>${weekCompletion}%</strong> of your estimated life weeks
            <br><small>Week ${currentWeek.toLocaleString()} of ${totalWeeks.toLocaleString()} total weeks</small>
        `;

        // Stats display
        const statsData = [
            { hours: sleptHours, label: 'Hours Sleeping', emoji: 'üò¥' },
            { hours: workedHours, label: 'Hours Working', emoji: 'üíº' },
            { hours: tvHours, label: 'Hours Watching TV/Screens', emoji: 'üì∫' },
            { hours: eatingHours, label: 'Hours Eating', emoji: 'üçΩÔ∏è' },
            { hours: socialMediaHours, label: 'Hours on Social Media', emoji: 'üì±' },
            { hours: commutingHours, label: 'Hours Commuting', emoji: 'üöó' },
            { hours: bathingHours, label: 'Hours Bathing/Getting Ready', emoji: 'üöø' },
            { hours: exerciseHours, label: 'Hours Exercising', emoji: 'üí™' },
            { hours: cookingHours, label: 'Hours Cooking', emoji: 'üë®‚Äçüç≥' },
            { hours: shoppingHours, label: 'Hours Shopping', emoji: 'üõí' }
        ];

        document.getElementById('stats-grid').innerHTML = statsData.map(stat => `
            <div class="col-md-6 col-lg-4">
                <div class="card stats-card h-100 text-center p-3">
                    <div class="stat-number">${stat.hours.toLocaleString()}</div>
                    <div class="stat-label">${stat.emoji} ${stat.label}<br><small>(${Math.round(stat.hours / 24).toLocaleString()} days)</small></div>
                </div>
            </div>
        `).join('');

        // Optimized grid generation - only recreate if parameters changed
        const gridConfig = `${totalWeeks}-${currentWeek}`;

        if (!gridGenerated || lastGridConfig !== gridConfig) {
            generateLifeGrid(totalWeeks, currentWeek);
            lastGridConfig = gridConfig;
            gridGenerated = true;
        } else {
            // Just update existing grid classes without recreating HTML
            updateGridClasses(totalWeeks, currentWeek);
        }

        // Weekends calculation
        const weekendsPerYear = 52;
        const weekendsLeft = Math.max(0, Math.round((Math.min(adjustedLifeExpectancy, 65) - ageYears) * weekendsPerYear));

        document.getElementById('weekend-info').innerHTML = `
            <div class="weekend-number">${weekendsLeft.toLocaleString()}</div>
            <div style="font-size: 1.3em; font-weight: 600; color: var(--text-primary); margin-bottom: 0.5em;">
                Weekends Left Until Retirement
            </div>
            <div style="color: var(--text-secondary);">
                ${healthReduction > 0 ? `‚ö†Ô∏è Health factors reduced life expectancy by ${healthReduction} years<br>` : ''}
                Time to spend with family, travel, and pursue your passions
            </div>
        `;

        // Draw the grid directly (no animation)
        drawLifeGrid();

        // Scroll to results
        document.getElementById('grid-container').scrollIntoView({ behavior: 'smooth' });
    }

    // Optimized grid generation function
    function generateLifeGrid(totalWeeks, currentWeek) {
        const gridContainer = document.getElementById('life-grid');
        const fragment = document.createDocumentFragment();

        for (let i = 0; i < totalWeeks; i++) {
            const square = document.createElement('div');
            square.className = getWeekClass(i, currentWeek);
            square.dataset.week = i;

            const year = Math.floor(i / 52) + 1;
            const week = (i % 52) + 1;
            square.title = `Year ${year}, Week ${week}`;

            fragment.appendChild(square);
        }

        gridContainer.innerHTML = '';
        gridContainer.appendChild(fragment);
    }

    // Update existing grid classes without recreating HTML
    function updateGridClasses(totalWeeks, currentWeek) {
        const squares = document.querySelectorAll('.week-square');
        squares.forEach((square, i) => {
            square.className = getWeekClass(i, currentWeek);
        });
    }

    // Helper function to get week class
    function getWeekClass(weekIndex, currentWeek) {
        let cls = 'week-square';
        if (weekIndex < currentWeek) {
            cls += ' week-past';
        } else if (weekIndex === currentWeek) {
            cls += ' week-current';
        } else {
            cls += ' week-future';
        }
        return cls;
    }

    // Simply draw the life grid without animations
    function drawLifeGrid() {
        const grid = document.getElementById('life-grid');
        const squares = grid.querySelectorAll('.week-square');

        // Just show all squares immediately
        squares.forEach((square) => {
            square.style.opacity = '1';
            square.style.transform = 'scale(1)';
        });

        // Show the grid container
        grid.style.opacity = '1';
        grid.style.transform = 'translateY(0)';
    }

    // Set up automatic recalculation when inputs change
    document.addEventListener('DOMContentLoaded', function () {
        const dobInput = document.getElementById('dob');
        const locationSelect = document.getElementById('location');
        const healthCheckboxes = ['tobacco', 'alcohol', 'diabetes', 'heart'];

        // Clean date input handling - only triggers when complete date is entered
        if (dobInput) {
            // Function to format date input as user types
            function formatDateInput(value) {
                // Remove all non-numeric characters
                const numbers = value.replace(/\D/g, '');
                
                // Apply formatting: YYYY-MM-DD
                if (numbers.length >= 8) {
                    return numbers.slice(0, 4) + '-' + numbers.slice(4, 6) + '-' + numbers.slice(6, 8);
                } else if (numbers.length >= 6) {
                    return numbers.slice(0, 4) + '-' + numbers.slice(4, 6) + '-' + numbers.slice(6);
                } else if (numbers.length >= 4) {
                    return numbers.slice(0, 4) + '-' + numbers.slice(4);
                } else {
                    return numbers;
                }
            }

            // Function to validate if date is complete and valid
            function isValidCompleteDate(dateString) {
                if (!dateString || dateString.length !== 10) return false;
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return false;
                
                // Check if it's a reasonable birth date (between 1900 and today)
                const year = date.getFullYear();
                const currentYear = new Date().getFullYear();
                return year >= 1900 && year <= currentYear;
            }

            // Function to check if we have 4 complete year digits
            function hasFourYearDigits(value) {
                const numbers = value.replace(/\D/g, '');
                return numbers.length >= 4;
            }

            // Input event for real-time formatting and validation
            dobInput.addEventListener('input', function (e) {
                const cursorPosition = e.target.selectionStart;
                const oldValue = e.target.value;
                const formattedValue = formatDateInput(e.target.value);
                
                // Update the input value with formatting
                e.target.value = formattedValue;
                
                // Adjust cursor position after formatting
                const lengthDiff = formattedValue.length - oldValue.length;
                const newCursorPosition = cursorPosition + lengthDiff;
                e.target.setSelectionRange(newCursorPosition, newCursorPosition);
                
                // Visual feedback based on validation
                if (formattedValue.length === 10) {
                    if (isValidCompleteDate(formattedValue)) {
                        e.target.classList.remove('is-invalid');
                        e.target.classList.add('is-valid');
                    } else {
                        e.target.classList.remove('is-valid');
                        e.target.classList.add('is-invalid');
                    }
                } else {
                    e.target.classList.remove('is-valid', 'is-invalid');
                }
                
                // Only trigger calculation when we have 4 year digits AND it's a complete valid date
                if (hasFourYearDigits(formattedValue) && isValidCompleteDate(formattedValue)) {
                    console.log('Complete date entered:', formattedValue);
                    calculateLife();
                }
            });

            // Keydown event to restrict input to numbers only
            dobInput.addEventListener('keydown', function (e) {
                // Allow: backspace, delete, tab, escape, enter, home, end, arrows
                if ([8, 9, 27, 13, 46, 35, 36, 37, 38, 39, 40].indexOf(e.keyCode) !== -1 ||
                    // Allow: Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X, Ctrl+Z
                    (e.ctrlKey === true && [65, 67, 86, 88, 90].indexOf(e.keyCode) !== -1)) {
                    return;
                }
                
                // Ensure that it is a number and stop the keypress if it's not
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
                
                // Limit to 8 digits total (YYYYMMDD)
                const numbers = this.value.replace(/\D/g, '');
                if (numbers.length >= 8 && e.keyCode >= 48 && e.keyCode <= 57) {
                    e.preventDefault();
                }
            });

            // Blur event as backup to trigger calculation if user clicks away
            dobInput.addEventListener('blur', function () {
                if (isValidCompleteDate(this.value)) {
                    calculateLife();
                }
            });
        }        if (locationSelect) {
            locationSelect.addEventListener('change', function () {
                if (isValidCompleteDate(dobInput.value)) {
                    calculateLife();
                }
            });
        }

        // Add listeners for health factor checkboxes
        healthCheckboxes.forEach(checkboxId => {
            const checkbox = document.getElementById(checkboxId);
            if (checkbox) {
                console.log(`Adding listener to ${checkboxId}`);
                checkbox.addEventListener('change', function () {
                    console.log(`${checkboxId} changed to:`, this.checked);
                    if (dobInput && isValidCompleteDate(dobInput.value)) {
                        calculateLife();
                    }
                });

                // Also add click event as backup
                checkbox.addEventListener('click', function () {
                    console.log(`${checkboxId} clicked, checked:`, this.checked);
                    if (dobInput && isValidCompleteDate(dobInput.value)) {
                        setTimeout(() => calculateLife(), 10); // Small delay to ensure checkbox state updates
                    }
                });
            } else {
                console.log(`Checkbox ${checkboxId} not found`);
            }
        });
    });
</script>