<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Limiting “Software Infant mortality” rate — decoding GO-JEK’s Deployment Checklist</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Limiting “Software Infant mortality” rate — decoding GO-JEK’s Deployment Checklist</h1>
</header>
<section data-field="subtitle" class="p-summary">
Every time you deploy a piece of software, you’re unknowingly taking an infant on a crazy ride — you expect the deployed software to become…
</section>
<section data-field="body" class="e-content">
<section name="bc7f" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="4116" id="4116" class="graf graf--h3 graf--leading graf--title">Limiting “<strong class="markup--strong markup--h3-strong">Software Infant mortality</strong>” rate — decoding GO-JEK’s Deployment Checklist</h3><p name="3f49" id="3f49" class="graf graf--p graf-after--h3">Every time you deploy a piece of software, you’re unknowingly taking an infant on a crazy ride — you expect the deployed software to become an adult as soon as it hits all app servers — it works sometimes and sometimes it doesn’t.</p><figure name="ae4b" id="ae4b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Px75J9akEfVb59lqEnYy1A.jpeg" data-width="3000" data-height="1987" src="https://cdn-images-1.medium.com/max/800/1*Px75J9akEfVb59lqEnYy1A.jpeg"></figure><p name="f4d7" id="f4d7" class="graf graf--p graf-after--figure">Deployments are a central theme for any organisation. At GO-JEK, our deployments are completely automated. As of today, we can’t deploy a single service manually; the services complexities and inter-service communication is so complicated, it’s better for machines to sort that out for us. But even though we have completely automated deployment and we gear towards extreme automation, we still forget few things. “Deployment at wish” is main-stream, and hence the famous quote “with great power, comes great responsibility”. We modified it a bit ;)</p><p name="06c6" id="06c6" class="graf graf--p graf--startsWithDoubleQuote graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">“Great flexibility comes with great caution, then comes great power, and thus followed by great responsibility”</em></strong></p><p name="9882" id="9882" class="graf graf--p graf-after--p">I tweeted about it a few weeks ago, and people asked about my checklist and why? Well, what can this checklist be apart from database changes? And why would you have a deployment checklist when everything is automated? There are two reasons for us to have some sort of sanity in our crazy world of pair programming, TDD and extreme hands on requirements.</p><ol class="postList"><li name="bf92" id="bf92" class="graf graf--li graf-after--p">We do <a href="https://trunkbaseddevelopment.com" data-href="https://trunkbaseddevelopment.com" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">trunk based development</a></li><li name="4ec2" id="4ec2" class="graf graf--li graf-after--li">We don’t restrict a deployment trigger to specific people. As soon as you are done, go ahead.</li></ol><p name="2d24" id="2d24" class="graf graf--p graf-after--li">But sometimes multiple commits go to a single deploy. If we do deploy after few builds, we’ll have changes piled up and it’s easy for someone to omit the cache update change or some config change required by the previous build, which hasn’t been deployed yet. And this bundles up the present build. Well, we aren’t crazy all the time, and we try not to deploy during high traffic time. Sometimes within those two or three hours, we might end up with 2, 3 or even 5 builds, because developers are committing their daily work.</p><p name="18b3" id="18b3" class="graf graf--p graf-after--p">Given this, we started experiencing stupid mistakes, and every time we went “<strong class="markup--strong markup--p-strong">oh sh*t, why didn’t we think about that?</strong>” — When you have these “Oh sh*t” moments more than 2 times are per week, it was time for us to rethink the whole process.</p><p name="86b8" id="86b8" class="graf graf--p graf-after--p">GO-JEK is a classic product engineering org. We don’t believe in processes and hierarchies — they stay in CEOs offices and don’t ever see the light of the day. Introducing draconian approval processes goes against our very culture, but we also wanted to make sure we are far more disciplined.</p><blockquote name="15c8" id="15c8" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“Forced practices are like the food you don’t like, but you are made to eat it, that kind of takes out whole fun of having food”</blockquote><p name="4d1d" id="4d1d" class="graf graf--p graf-after--blockquote">The same goes with developers/engineers. If they don’t like it, they will start delaying deployments — and I have experienced enough horror stories about monthly deploys.</p><p name="6d03" id="6d03" class="graf graf--p graf-after--p">So we came up with simple rule — here is a checklist, go answer all the questions in it — like a 15 minutes exam, file a deployment ticket, we will go over it and you will have a green signal to push the button. If your deploy fails, promptly follow up with RCA for that failure, and after reading RCA*, I would silently go and add that missing check into our deployment checklist. And once you fail a build, then every team member in your team has to do deployments and go through the deployment checklist.</p><p name="ad60" id="ad60" class="graf graf--p graf-after--p">Before we introduced checklist, we used to have around 80% success on our deployments; not because software was faulty, but because we forgot some small things — usually when two or three builds are combined.</p><p name="5133" id="5133" class="graf graf--p graf-after--p">But once the checklist was introduced, the results were astonishing. Across 300+ micro-services and some ~2500+ deploys a month, we have a maximum of 6 to 7 failures, compared to the earlier 75% success rate. <em class="markup--em markup--p-em">We have now moved to have a 99.99% deployment success rate.</em></p><p name="74fa" id="74fa" class="graf graf--p graf-after--p graf--trailing">I am not going to put the entire checklist here, because this varies from business to business. But I would like to put a rough outline. Hope this helps.</p></div></div></section><section name="2e05" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="d42c" id="d42c" class="graf graf--h3 graf--leading"><strong class="markup--strong markup--h3-strong">OVERVIEW</strong></h3><p name="fcd7" id="fcd7" class="graf graf--p graf-after--h3">[explain overall impact and feature overview, bug details]</p><p name="19ef" id="19ef" class="graf graf--p graf-after--p">Stories/Bug Reports</p><p name="548f" id="548f" class="graf graf--p graf-after--p">Committers</p><p name="3d71" id="3d71" class="graf graf--p graf-after--p">List all committers, Project Lead</p><p name="c5ad" id="c5ad" class="graf graf--p graf-after--p">Acceptance Signed off</p><ul class="postList"><li name="a127" id="a127" class="graf graf--li graf-after--p">Systems</li><li name="d77e" id="d77e" class="graf graf--li graf-after--li">GO-JEK Core</li><li name="fe63" id="fe63" class="graf graf--li graf-after--li">GO-PAY Core</li><li name="26d9" id="26d9" class="graf graf--li graf-after--li">BI</li><li name="e279" id="e279" class="graf graf--li graf-after--li">Security</li></ul><p name="2056" id="2056" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">SERVICES IMPACTED</strong></p><p name="8e04" id="8e04" class="graf graf--p graf-after--p">List all services which have been impacted and why? What kind of test has been performed for each one of the them?</p><p name="8769" id="8769" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Service Details</strong></p><ul class="postList"><li name="12e6" id="12e6" class="graf graf--li graf-after--p">Please provide javadoc/rubydoc/godoc api documentation for your service client or service uri.</li><li name="115a" id="115a" class="graf graf--li graf-after--li">Please provide URL for your wiki page for this specific change.</li><li name="fe7f" id="fe7f" class="graf graf--li graf-after--li">Please provide datadog dashboard URL for your service</li><li name="fa2d" id="fa2d" class="graf graf--li graf-after--li">Please provide newrelic dashboard URL for your service</li></ul><p name="8fc7" id="8fc7" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Service Rollback</strong></p><ul class="postList"><li name="70e0" id="70e0" class="graf graf--li graf-after--p">What’s your rollback strategy?</li><li name="8b99" id="8b99" class="graf graf--li graf-after--li">Do you switch rollback with feature flag or does it require complete deployment again?</li></ul><p name="a5d0" id="a5d0" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Service Component — Database</strong></p><ul class="postList"><li name="c1be" id="c1be" class="graf graf--li graf-after--p">List down all the database changes, if you added any columns, removed any columns, added or removed any tables.</li><li name="8c26" id="8c26" class="graf graf--li graf-after--li">What kind of indexes do you have?</li><li name="555a" id="555a" class="graf graf--li graf-after--li">If you added new column does it require index? If yes, why? If no, why not?</li><li name="f782" id="f782" class="graf graf--li graf-after--li">Do you make changes to records? Do you do frequent deletes or updates?</li></ul><p name="5e3b" id="5e3b" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Service Component — Security</strong></p><ul class="postList"><li name="1dd0" id="1dd0" class="graf graf--li graf-after--p">Are you making changes to the public API? If changes are directly impacting the public API end point, then please get approval from the Security Team and a sign off from Sheran — Please also include security ticket link over here.</li></ul><p name="718e" id="718e" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Service Component — Monitoring</strong></p><ul class="postList"><li name="776d" id="776d" class="graf graf--li graf-after--p">List all the services you own and list down each server monitoring parameters</li><li name="b4c9" id="b4c9" class="graf graf--li graf-after--li">Alerts for service uptime</li><li name="97ec" id="97ec" class="graf graf--li graf-after--li">Alerts for service performance degradation</li><li name="1873" id="1873" class="graf graf--li graf-after--li">Alerts for service machine disk/cpu/memory — what’s the threshold and how pager duty is triggered</li><li name="f700" id="f700" class="graf graf--li graf-after--li graf--trailing">Please include today’s screenshots for each of them. We need to make sure that you have proper monitoring in place.</li></ul></div></div></section><section name="50c4" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="ec7c" id="ec7c" class="graf graf--p graf--leading">These are few of the checks we do, sometimes these don’t take more than 15 minutes, and sometimes they force you to think, and make sure that you are covered. We have many more checks regarding proxies, caches, load balances, queues, application components, customer apps and metrics calculations, data aggregation.</p><p name="947c" id="947c" class="graf graf--p graf-after--p">This checklist has certainly helped us. It has put the trust back in the system and automation. It has been an amazing journey<strong class="markup--strong markup--p-strong"> from no automation</strong>, to complete automation to ruthless deployments to breaking systems everyday to <strong class="markup--strong markup--p-strong">balanced, scaled and automated deployment system.</strong></p><p name="712d" id="712d" class="graf graf--p graf-after--p">What a journey!</p><p name="5fc7" id="5fc7" class="graf graf--p graf-after--p">The title was inspired by Peter Pronovost’s Checklist</p><ul class="postList"><li name="9a16" id="9a16" class="graf graf--li graf-after--p">Hospitals in the US – still happy with <a href="https://www.hopkinsmedicine.org/news/media/releases/three_years_out_safety_checklist_continues_to_keep_hospital_infections_in_check" data-href="https://www.hopkinsmedicine.org/news/media/releases/three_years_out_safety_checklist_continues_to_keep_hospital_infections_in_check" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">checklist</a></li><li name="e815" id="e815" class="graf graf--li graf-after--li">Recently a checklist <a href="http://www.borgenmagazine.com/checklist-conquers-childbirth-casualties/" data-href="http://www.borgenmagazine.com/checklist-conquers-childbirth-casualties/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">saved hundreds in Uttar Pradesh, India</a> – helping infant mortality</li></ul><p name="7dec" id="7dec" class="graf graf--p graf-after--li">_______________</p><p name="785a" id="785a" class="graf graf--p graf-after--p">About RCAs:</p><p name="b826" id="b826" class="graf graf--p graf-after--p graf--trailing">RSA actions result in 4 things — 1. What happened? 2. What was the impact? 3. Why did it happen and why it took time to remedy? Why not auto-heal? 4. Action items. Usually, starts like this: At around 10:15 PM the deployment progressed on to machines and we started seeing errors on load balancers and proxies</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@ajeygore" class="p-author h-card">Ajey Gore</a> on <a href="https://medium.com/p/1c6cc3e28df"><time class="dt-published" datetime="2018-02-18T12:36:59.890Z">February 18, 2018</time></a>.</p><p><a href="https://medium.com/@ajeygore/limiting-software-infant-mortality-rate-decoding-gojek-deployment-checklist-1c6cc3e28df" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on May 30, 2021.</p></footer></article></body></html>